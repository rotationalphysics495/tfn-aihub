# Application
DEBUG=false

# Supabase
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-supabase-anon-key

# MSSQL (Read-Only)
# IMPORTANT: The database user MUST have read-only permissions at the database level.
# Application-level enforcement is not sufficient for security.
# Example SQL Server setup:
#   CREATE LOGIN RO_User WITH PASSWORD = '...';
#   CREATE USER RO_User FOR LOGIN RO_User;
#   GRANT SELECT ON SCHEMA::dbo TO RO_User;
#   DENY INSERT, UPDATE, DELETE ON SCHEMA::dbo TO RO_User;

MSSQL_SERVER=your-server-hostname-or-ip
MSSQL_DATABASE=your-database-name
MSSQL_USER=RO_User
MSSQL_PASSWORD=your-secure-password
MSSQL_PORT=1433
MSSQL_DRIVER=ODBC Driver 18 for SQL Server

# Connection Pool Settings (optional)
MSSQL_POOL_SIZE=5
MSSQL_MAX_OVERFLOW=10
MSSQL_POOL_TIMEOUT=30

# Mem0 Configuration (Story 4.1)
# Legacy API key (not required for Supabase pgvector setup)
MEM0_API_KEY=your-mem0-api-key
# CRITICAL: Direct PostgreSQL connection string for Mem0 vector storage
# Get from: Supabase Dashboard > Project Settings > Database > Connection String (URI format)
# Use port 6543 (connection pooler) for production, 5432 for direct connection
SUPABASE_DB_URL=postgresql://postgres.[ref]:[password]@aws-0-us-east-1.pooler.supabase.com:6543/postgres
# Memory collection name (default: memories)
MEM0_COLLECTION_NAME=memories
# Embedding dimensions - matches OpenAI text-embedding-ada-002 (default: 1536)
MEM0_EMBEDDING_DIMS=1536
# Default number of memories to retrieve (default: 5)
MEM0_TOP_K=5
# Minimum similarity threshold for results (default: 0.7)
MEM0_SIMILARITY_THRESHOLD=0.7

# OpenAI (for LangChain and Mem0 embeddings)
# Required for Story 4.1 Mem0 integration
OPENAI_API_KEY=your-openai-api-key

# Financial Configuration (Story 2.7)
# Fallback hourly rate when cost_centers entry is missing
DEFAULT_HOURLY_RATE=100.00
# Fallback cost per waste unit when cost_centers entry is missing
DEFAULT_COST_PER_UNIT=10.00
# Display currency code
FINANCIAL_CURRENCY=USD

# Action Engine Configuration (Story 3.1)
# OEE threshold for filtering (assets below this are flagged)
TARGET_OEE_PERCENTAGE=85.0
# Minimum financial loss to include in action list (USD)
FINANCIAL_LOSS_THRESHOLD=1000.0
# OEE gap thresholds for priority levels
OEE_HIGH_GAP_THRESHOLD=20.0
OEE_MEDIUM_GAP_THRESHOLD=10.0
# Financial loss thresholds for priority levels (USD)
FINANCIAL_HIGH_THRESHOLD=5000.0
FINANCIAL_MEDIUM_THRESHOLD=2000.0

# Agent Configuration (Story 5.1)
# LLM provider selection (openai/anthropic) - currently only openai is supported
LLM_PROVIDER=openai
# Model identifier for the agent
LLM_MODEL=gpt-4-turbo-preview
# Temperature for agent responses (0-1, lower = more deterministic tool selection)
AGENT_TEMPERATURE=0.1
# Maximum iterations for agent reasoning (prevents runaway loops)
AGENT_MAX_ITERATIONS=5
# Enable verbose logging for agent debugging
AGENT_VERBOSE=false
# Agent execution timeout in seconds
AGENT_TIMEOUT_SECONDS=60
# Rate limit: requests per window per user
AGENT_RATE_LIMIT_REQUESTS=10
# Rate limit: window duration in seconds
AGENT_RATE_LIMIT_WINDOW=60

# Data Source Configuration (Story 5.2)
# Data source type: "supabase" (default) or "composite"
# - supabase: Direct Supabase access (recommended)
# - composite: Multi-source routing (future MSSQL integration)
DATA_SOURCE_TYPE=supabase
